# i3 config file (v4)
# Please see http://i3wm.org/docs/userguide.html for a complete reference!


### base

  # see `$ xmodmap -pm` for valid modifiers
  set $mod Mod4


### appearance

  ## font
  font pango:DejaVu Sans Mono 8

  ## window
  new_window pixel 1

  ## colors
  # class                  border   backgr.  text     indica.
  client.focused           #808080  #808080  #c2c2c2  #cc7832
  client.focused_inactive  #444444  #444444  #c2c2c2  #444444
  client.unfocused         #444444  #444444  #c2c2c2  #444444
  client.urgent            #900000  #900000  #c2c2c2  #900000
  #client.placeholder       #000000  #000000  #c2c2c2  #000000
  client.background        #000000


### focus binds

  ## focus inheritance
  #bindsym $mod+a focus parent
  #bindsym $mod+d focus child

  ## focus positional
  bindsym $mod+h focus left
  bindsym $mod+t focus down
  bindsym $mod+n focus up
  bindsym $mod+s focus right

  ## focus layers
  bindsym $mod+space focus mode_toggle


### layout binds

  ## split orientation
  bindsym $mod+a split h
  bindsym $mod+o split v

  ## move focused around
  bindsym $mod+Shift+h move left
  bindsym $mod+Shift+t move down
  bindsym $mod+Shift+n move up
  bindsym $mod+Shift+s move right

  ## display modes
  #bindsym $mod+s           layout   stacking
  bindsym $mod+Shift+a     layout   tabbed
  bindsym $mod+Shift+o     layout   toggle split
  bindsym $mod+Shift+space floating toggle

  ## float
  floating_modifier $mod

  ## fullscreen
  bindsym $mod+e fullscreen toggle


### workspace binds

  ## cycle workspace
  bindsym $mod+Mod1+h workspace prev_on_output
  bindsym $mod+Mod1+t workspace next_on_output
  bindsym $mod+Mod1+n workspace prev
  bindsym $mod+Mod1+s workspace next

  ## focus workspace
  bindsym $mod+F1  workspace  1
  bindsym $mod+F2  workspace  2
  bindsym $mod+F3  workspace  3
  bindsym $mod+F4  workspace  4
  bindsym $mod+F5  workspace  5
  bindsym $mod+F6  workspace  6
  bindsym $mod+F7  workspace  7
  bindsym $mod+F8  workspace  8
  bindsym $mod+F9  workspace  9
  bindsym $mod+F10 workspace 10
  bindsym $mod+F11 workspace 11
  bindsym $mod+F12 workspace 12

  ## move focused to workspace
  bindsym $mod+Shift+F1  move container to workspace  1
  bindsym $mod+Shift+F2  move container to workspace  2
  bindsym $mod+Shift+F3  move container to workspace  3
  bindsym $mod+Shift+F4  move container to workspace  4
  bindsym $mod+Shift+F5  move container to workspace  5
  bindsym $mod+Shift+F6  move container to workspace  6
  bindsym $mod+Shift+F7  move container to workspace  7
  bindsym $mod+Shift+F8  move container to workspace  8
  bindsym $mod+Shift+F9  move container to workspace  9
  bindsym $mod+Shift+F10 move container to workspace 10
  bindsym $mod+Shift+F11 move container to workspace 11
  bindsym $mod+Shift+F12 move container to workspace 12


### basic commands

  bindsym $mod+d      exec dmenu_run
  bindsym $mod+Mod1+d exec passmenu

  # ensure that we can alway open a terminal
  bindsym $mod+Return exec i3-sensible-terminal


### media keys

  # audio volume
  bindsym XF86AudioMute        exec pactl set-sink-mute 0 toggle
  bindsym Shift+XF86AudioMute  exec pactl mpc --host ~/.local/runtime/mpd volume 0
  bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5%
  bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5%
  bindsym Shift+XF86AudioLowerVolume exec mpc --host ~/.local/runtime/mpd volume -5
  bindsym Shift+XF86AudioRaiseVolume exec mpc --host ~/.local/runtime/mpd volume +5

  # audio playback
  bindsym XF86AudioPlay       exec mpc --host ~/.local/runtime/mpd toggle
  bindsym XF86AudioPause      exec mpc --host ~/.local/runtime/mpd pause
  bindsym XF86AudioStop       exec mpc --host ~/.local/runtime/mpd stop
  bindsym XF86AudioPrev       exec mpc --host ~/.local/runtime/mpd prev
  bindsym XF86AudioNext       exec mpc --host ~/.local/runtime/mpd next
  bindsym Shift+XF86AudioPrev exec mpc --host ~/.local/runtime/mpd seek -5%
  bindsym Shift+XF86AudioNext exec mpc --host ~/.local/runtime/mpd seek +5%

  # monitor brightness
  bindsym XF86MonBrightnessDown exec light -U 10
  bindsym XF86MonBrightnessUp   exec light -A 10

  # display
  #bindsym XF86Display exec i3lock --show-failed-attempts --color=710B03

  # quicklaunch
  bindsym XF86Launch1 exec notify-send -a i3 -t 2000 macro.1 "$(macro.1 2>&1)"
  bindsym XF86Launch2 exec notify-send -a i3 -t 2000 macro.2 "$(macro.2 2>&1)"
  bindsym XF86Launch3 exec notify-send -a i3 -t 2000 macro.3 "$(macro.3 2>&1)"
  bindsym XF86Launch4 exec notify-send -a i3 -t 2000 macro.4 "$(macro.4 2>&1)"
  bindsym XF86Launch5 exec notify-send -a i3 -t 2000 macro.5 "$(macro.5 2>&1)"


### modes

  ## menu mode
  set $m_menu "<menu> [l]aunch [s]ystem [u]tils"
  mode $m_menu {

    bindsym l mode $m_launch
    bindsym s mode $m_system
    bindsym u mode $m_utils

    bindsym Return mode default
    bindsym Escape mode default
  }
  bindsym $mod+Tab mode $m_menu

  ## launch mode
  set $m_launch  "<launch> [b]rowser [e]ditor [g]ames [i]rc [l]ibrary [m]usic [p]ost/email [t]orrent [v]oice-chat"
  mode $m_launch {

    # applications
    bindsym b exec firefox                         ; mode default
    bindsym e exec i3-sensible-editor              ; mode default
    bindsym g exec steam-native                    ; mode default
    bindsym i exec i3-sensible-terminal -e irssi   ; mode default
    bindsym l exec calibre                         ; mode default
    bindsym m exec i3-sensible-terminal -e ncmpcpp ; mode default
    bindsym p workspace "12"; exec i3-sensible-terminal -e neomutt ; mode default
    bindsym t exec i3-sensible-terminal -e transmission-remote-cli ; mode default
    bindsym v exec mumble                          ; mode default

    # alternatives
    bindsym Mod1+b exec chromium                   ; mode default
    bindsym Mod1+m exec vlc                        ; mode default

    # controls
    bindsym Ctrl+m exec i3-sensible-terminal -e pulsemixer ; mode default

    bindsym Return mode default
    bindsym Escape mode $m_menu
  }

  ## system mode
  set $m_system "<session> [h]top [k]ill [l]ock [p]oweroff [q]uit [r]eboot [s]uspend | 1:restart 2:reload"
  mode $m_system {

    # status
    bindsym h exec i3-sensible-terminal -e htop ; mode default

# system power
    bindsym r exec "i3-nagbar -t warning -m 'Reboot!?'   -b 'Yes, REBOOT!'   'systemctl reboot'"   ; mode default
    bindsym p exec "i3-nagbar -t warning -m 'Poweroff!?' -b 'Yes, POWEROFF!' 'systemctl poweroff'" ; mode default

    # locking session
    bindsym l exec "i3lock --color=000000"                      ; mode default
    bindsym s exec "i3lock --color=000000 && systemctl suspend" ; mode default

    # kill
    bindsym k kill ; mode default

    # i3 meta stuff
    bindsym e exec "i3-nagbar -t warning -m 'Quit i3!?' -b 'Yes, EXIT i3!' 'i3-msg exit; systemctl --user isolate daemon.target'" ; mode default
    bindsym 1 restart    ; mode default
    bindsym 2 reload     ; mode default

    bindsym Return mode default
    bindsym Escape mode $m_menu
  }

  ## utils mode
  set $m_utils "<utils>"
  mode $m_utils {

    bindsym Return mode default
    bindsym Escape mode $m_menu
  }

  ## resize
  set $m_resize  "<rotate & resize>"
  mode $m_resize {

    set $resize_s  1
    set $resize_m 10

    # medium resize
    bindsym h resize grow   width  $resize_m px or $resize_m ppt
    bindsym t resize shrink height $resize_m px or $resize_m ppt
    bindsym n resize grow   height $resize_m px or $resize_m ppt
    bindsym s resize shrink width  $resize_m px or $resize_m ppt

    # small resize with Shift
    bindsym Shift+h resize grow   width  $resize_s px or $resize_s ppt
    bindsym Shift+t resize shrink height $resize_s px or $resize_s ppt
    bindsym Shift+n resize grow   height $resize_s px or $resize_s ppt
    bindsym Shift+s resize shrink width  $resize_s px or $resize_s ppt

    # rotate
    bindsym Ctrl+h exec "xrandr --output LVDS-1 --rotate left"     ; mode default
    bindsym Ctrl+t exec "xrandr --output LVDS-1 --rotate normal"   ; mode default
    bindsym Ctrl+n exec "xrandr --output LVDS-1 --rotate inverted" ; mode default
    bindsym Ctrl+s exec "xrandr --output LVDS-1 --rotate right"    ; mode default

    bindsym Return mode default
    bindsym Escape mode default
  }
  bindsym $mod+u mode $m_resize

### options

  # prevents wondering why UI suddenly stopped responding
  popup_during_fullscreen leave_fullscreen


### status bar

  bar {

    position       top
    mode           hide
    modifier       $mod

    tray_output    primary
#    tray_padding   0

    status_command exec i3status

    font           pango:DejaVu Sans Mono, Icons 8

    colors {
      background   #000000
      statusline   #c2c2c2

      # class            border  bg      fg
      focused_workspace  #444444 #444444 #c2c2c2
      active_workspace   #444444 #444444 #000000
      inactive_workspace #444444 #000000 #666666
      urgent_workspace   #900000 #900000 #c2c2c2
#      binding_mode       #386941 #000000 #c2c2c2
    }
  }
